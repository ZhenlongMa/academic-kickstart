{{- define "main" -}}

{{ partial "page_header.html" . }}

<div class="universal-wrapper">
  <div class="row">
    <div class="col-lg-12">

      {{ with .Content }}
      <div class="article-style">{{ . }}</div>
      {{ end }}

      {{ range .Data.Pages.GroupByDate "2006" }}
      <div class="row" id="talk_list">
        <div class="col-lg-2">
          <h3>{{ .Key }}</h3>
        </div>
        <div class="col-lg-10">

          {{ range .Pages }}
            {{ if eq $.Params.view 1 }}
              {{ partial "li_list" . }}
            {{ else if eq $.Params.view 3 }}
              {{ partial "li_card" . }}
            {{ else }}
              {{ partial "li_compact" . }}
            {{ end }}
          {{ end }}

        </div>
      </div>
      {{ end }}

    </div>
  </div>

</div>

{{ if (.Params.gitment) }}
<div id="git-comments"></div>
<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
  var gitment = new Gitment({
    id: '{{ .Slug }}',  // 可选, 默认为 location.href
    owner: 'ZhenlongMa',
    repo: 'page-gitment',
    oauth: {
      client_id: 'ab11d78dde0e5defe2a0',
      client_secret: 'ec240fb29b9c4521aa2377b74c0575fa18f1260d',
    }
  })
  gitment.render('git-comments')
</script>
{{ end }}

{{- end -}}